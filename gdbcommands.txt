#
# Go to the start of the recorded execution with 'ugo start' before running this script.
#

# Delete all breakpoints
delete

# Turn on logging to external gdb.txt file.
set print thread-events off

# Don't print structures in call frame args.
set print frame-arguments scalars
set print frame-arguments none 

set pagination off
set logging overwrite on
set logging off
set logging on

# Set breakpoint on when we change the number of records on a collection (record store).
break _changeNumRecords
commands
# Show a partial call stack.
bt 3
printf "namespace: "
print _ns
printf "current count: "
print _sizeInfo->numRecords.load() 
printf "count diff: "
print diff 
continue
end

# Run the recorded execution.
continue



